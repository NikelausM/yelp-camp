<%- include("../partials/header") %>

<h1>User Profile</h1>

<div class="row">
	<div class="col-md-6">
		<div class="card">
			<div class="card-body">
				<div class="d-flex row justify-content-around align-items-center">
					<div class="d-flex flex-column">
						<h1><%= user.username %></h1>
					</div>
					
					<%if(currentUser) { %>
						<%
						var isFollower = false;
						user.followers.forEach((follower) => {
							if(follower._id.equals(currentUser._id)) {
								isFollower = true;
							}
						})
						%>
						<%if(!isFollower) {%>
							<div class="d-flex flex-column">
								<a href="/follow/<%=user.id%>">
									<button class="btn btn-success">Follow</button>
								</a>
							</div>
						<%}%>
					<%}%>
				</div>
				<div class="d-flex row justify-content-around align-items-center">
					<h2><%= user.firstName + " " + user.lastName %></h1>
				</div>
			</div>
			<hr>
			<img src="<%= user.avatar %>" alt="user profile image" class="card-image">
			<hr>
			<div class="card-body">
				<div class="row mb-1">
					<div class="col">
						<strong>Email:</strong><a href="mailto:<%= user.email %>"><%= user.email %></a>
					</div>
				</div>
				<div class="row">
					<div class="col">
					<% if(currentUser && user._id.equals(currentUser._id) || currentUser && currentUser.isAdmin) { %>
						<a class="btn btn-warning" href="/forgot">Reset Password</a>
					</div				
					<% } %>
					</div>
				</div>

			</div>
			<hr>
			<div class="card-body">
				<h2 style="margin-top: 10px"><strong>Bio</strong></h2>
				Mauris aliquam turpis sit amet ipsum rutrum, et vestibulum ante pulvinar. Ut tortor ante, tristique et rutrum ut, volutpat sed metus. Etiam nec justo non orci aliquet semper quis ut augue. Phasellus egestas neque quis scelerisque semper. Etiam sagittis porttitor quam in volutpat. Suspendisse consectetur pretium ipsum, a ullamcorper felis cursus vel. Ut rutrum ligula a erat feugiat, eget ultricies erat dapibus. Aliquam pellentesque eget sapien nec porttitor. Aliquam euismod turpis a magna convallis dignissim. Ut nec urna in sapien suscipit facilisis. Praesent vitae tortor sit amet odio iaculis elementum at nec urna. Aliquam vitae nibh porta lorem egestas vestibulum hendrerit sed leo.
			</div>
		</div>
	</div>
	<div class="col-md-6">
		<div class="card" >
			<div class="card-body">
				<h3 class="text-center">
					<%= user.username %>'s campgrounds 
				</h3>
			</div>
			<hr>
			<div class="card-body">
				<% campgrounds.forEach(function(campground) { %>
					<div class="card">
						<div class="card-body">
							<!-- <a href="/campgrounds/<%=campground.id %>"><%= campground.name %></a> -->
							<a href="/campgrounds/<%=campground.slug %>"><%= campground.name %></a>
						</div>
					</div>
				<% }) %>
			</div>
		</div>
	</div>
</div>

<%- include("../partials/footer") %>